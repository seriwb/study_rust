# Rust勉強用

- VSCodeで使う場合は、ルートディレクトリにCargo.tomlがくるディレクトリ配置にする必要がある


```
# 更新
rustup update

# コンパイル
rustc ファイル名
```

## cargoコマンド

```
# プログラム作成
cargo new プロジェクト名

# ビルド
cargo build

# Clean
cargo clean

# 実行
cargo run
```


# Cargo

- デフォルトのmainソースコードはsrc/main.rs
  - 変更する場合はCargo.tomlに[[bin]]セクションを作って対応する

# 言語仕様

## 構文解説
- String型は+演算子での連結が可能
- 変数に付く&が借用の印
- タプルの内容をprintln!マクロで直接表示はできない
  - タプルへのアクセスは番号になる
- 配列型は固定長
  - 添字はマイナス不可
- ベクター型は可変長

## 所有権の話
- 所有権の移動と借用がある
- Rustは同じメモリを参照する変数は1つだけ

### 移動
- Copyが実装されていない変数を代入すると移動が起きる
- 移動後の変数を参照しようとするとコンパイルエラーになる

### 借用
- println!マクロは変数の所有権を借用している

## 束縛
- Rustでは束縛が優先されるので、基本は変数の値を変更しないことが求められる
  - なのでデフォルトが再代入不可：変数の束縛
- 再代入を許可する場合は、宣言時にmutを利用する：`let mut x = 100;`

### シャドーイング
- 変数の二重宣言がエラーにならない
- 最初に宣言されたほうが覆い隠される（シャドーイング


## スコープ
- スコープはブロックスコープ
- ブロックの外側の変数は、基本的に内側から参照できる（関数内関数はできない
  - クロージャは定義されたブロック内の変数を参照できる
  - 関数は定義されたブロック内の変数を参照できない（関数内関数は元の関数の変数を参照できない

## クロージャ
- クロージャのパラメータは、そのクロージャをどこかで利用していれば型なし宣言でもOKだが、使っていないとエラーになる
  - パラメータに型をつけていれば、使ってなくてもOK
  - パラメータの型は最初に呼ばれた式で型推論されるので、別の型で呼ぶことは出来ない